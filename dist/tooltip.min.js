const t=Symbol("calc.target.rect"),e=Symbol("calc.position"),n=Symbol("position.key"),o=Symbol("show.delay.key"),s=Symbol("future.show.key"),i=Object.freeze({far:"far",near:"near",below:"below",above:"above"}),a=Object.freeze([i.below,i.above,i.far,i.near]);let h=a;export{i as POSITIONS,l as tooltip,r as setPositionFallbacks};function l(t){const e=document.createElement("tool-tip");return document.body.appendChild(e),e}function r(...t){(h=t.filter(t=>t in i)).push(...a.filter(t=>h.indexOf(t)<0))}const d=document.createElement("template");d.innerHTML="\n\t<style>\n\t\t:host {\n\t\t\tposition: fixed;\n\t\t\tpadding: 12px;\n\t\t\tdisplay: none;\n\t\t\tz-index: 9999;\n\t\t\toverflow: hidden;\n\t\t\tborder-radius: 8px;\n\t\t\tfont-family: sans-serif;\n\t\t\tfont-size: 0.8em;\n\t\t\ttransition: opacity 333ms, transform 333ms;\n\t\t\tcolor: #fff;\n\t\t\tbackground-color: #000;\n\t\t}\n\n\t\t:host(.pre-shown) {\n\t\t\tdisplay: block;\n\t\t\topacity: 0;\n\t\t\ttransform: scale(0.96);\n\t\t}\n\n\t\t:host(.shown) {\n\t\t\tdisplay: block;\n\t\t\topacity: 1;\n\t\t\ttransform: scale(1);\n\t\t}\n\n\t\t:host(.light) {\n\t\t\tcolor: #000;\n\t\t\tbackground-color: #fff;\n\t\t\tbox-shadow: 0 0 6px rgba(100,100,100,0.5);\n\t\t}\n\t</style>\n\n\t<slot></slot>\n",customElements.define("tool-tip",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}).appendChild(d.content.cloneNode(!0))}connectedCallback(){this[n]||(this[n]=this.dataset.position||h[0]),this[o]||(this[o]=this.dataset.showDelay||375);const t=this.dataset.targetId,e=this.dataset.targetClass;if(t||e){const n=this.getRootNode().querySelectorAll(t?"#"+t:"."+e);n.length?n.forEach(t=>{t.addEventListener("mouseenter",t=>{const e=t.target;this[s]||(this[s]=setTimeout(()=>{this[s]=null,this.show(e)},this.showDelay))}),t.addEventListener("mouseleave",t=>{this.classList.contains("shown")?this.hide():this[s]&&(clearTimeout(this[s]),this[s]=null)})}):console.warn('failed to match any target element by id "'+t+'", JS driven mode')}else console.info("tooltip has nor target-id neither target-class defined, JS driven mode")}show(n,o){this.classList.remove("shown"),this.classList.add("pre-shown"),o&&("string"==typeof o?this.innerHTML=o:o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.DOCUMENT_FRAGMENT_NODE||o.nodeType===Node.TEXT_NODE?(this.innerHTML="",this.appendChild(o)):console.warn('invalid content "'+o+'" (nor "string" neither "Element"), ingnoring it'));const s=this[t](n),i=this[e](s);Object.assign(this.style,i),this.classList.replace("pre-shown","shown")}hide(){this.classList.remove("shown")}remove(){this.hide(),this.parentElement.removeChild(this)}get position(){return this[n]}set position(t){t in i&&this[n]!==t&&(this[n]=t)}get showDelay(){return this[o]}set showDelay(t){"number"!=typeof t||isNaN(t)||this[o]===t||(this[o]=t)}[t](t){return t.getBoundingClientRect()}[e](t){const e=[this.position];e.push(...h.filter(t=>e.indexOf(t)<0));const n=this.offsetWidth,o=this.offsetHeight,s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l={},r="rtl"===getComputedStyle(document.body).direction;return e.some(e=>{if(e===i.below&&o<=a-t.bottom-12){let e=t.x+t.width/2-n/2;e=Math.max(12,e),e=Math.min(s-n-12,e),l.top=t.bottom+12+"px",l.left=e+"px"}else if(e===i.above&&o<=t.y-12){let e=t.x+t.width/2-n/2;e=Math.max(12,e),e=Math.min(s-n-12,e),l.top=t.y-o-12+"px",l.left=e+"px"}else if((e===i.far&&r||e===i.near&&!r)&&n<=t.x-12){let e=t.y+t.height/2-o/2;e=Math.max(12,e),e=Math.min(a-o-12,e),l.top=e+"px",l.left=t.x-n-12+"px"}else if((e===i.near&&r||e===i.far&&!r)&&n<=s-t.right-12){let e=t.y+t.height/2-o/2;e=Math.max(12,e),e=Math.min(a-o-12,e),l.top=e+"px",l.left=t.right+12+"px"}return l.top&&l.left}),l}});